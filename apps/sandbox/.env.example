# Sandbox Service Configuration

# Server settings
SANDBOX_PORT=3003
SANDBOX_HOST=0.0.0.0
NODE_ENV=development
LOG_LEVEL=info

# Frontend URL for CORS
FRONTEND_URL=http://localhost:3000

# Resource limits
MAX_MEMORY_PER_SESSION=536870912  # 512MB
MAX_CPU_PERCENTAGE=50
MAX_EXECUTION_TIME=30000  # 30 seconds
MAX_CONCURRENT_SESSIONS=10
MAX_CONCURRENT_EXECUTIONS=5

# Security settings
ENABLE_NETWORKING=false
ENABLE_FILE_ACCESS=true
ENABLE_PACKAGE_INSTALL=true

# Docker settings
DOCKER_IMAGE=penny-sandbox:latest
DOCKER_NETWORK=none
DOCKER_MEMORY_LIMIT=512m
DOCKER_CPU_LIMIT=0.5

# Rate limiting
RATE_LIMIT_MAX=100  # requests per window
RATE_LIMIT_WINDOW=60000  # 1 minute

# Session management
SESSION_TIMEOUT=1800000  # 30 minutes
CLEANUP_INTERVAL=300000  # 5 minutes

# Monitoring
ENABLE_METRICS=true
METRICS_INTERVAL=5000  # 5 seconds
ENABLE_HEALTH_CHECKS=true

# Python settings
PYTHON_VERSION=3.11
PYTHONPATH=/sandbox/python:/workspace
MPLBACKEND=Agg

# Storage paths
TEMP_DIR=/tmp
WORKSPACE_DIR=/workspace
PLOTS_DIR=/tmp/plots
DATA_DIR=/sandbox/data

# Package management
PIP_TIMEOUT=120000  # 2 minutes
PIP_RETRIES=3
ALLOWED_PACKAGE_SOURCES=https://pypi.org/,https://files.pythonhosted.org/

# Security policies
IMPORTS_POLICY_FILE=src/policies/imports.json
RESOURCES_POLICY_FILE=src/policies/resources.json
FILESYSTEM_POLICY_FILE=src/policies/filesystem.json

# Logging
LOG_FORMAT=json
LOG_DESTINATION=stdout
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_LOGGING=true
ENABLE_ACCESS_LOGGING=true

# Development settings (only for development)
ENABLE_HOT_RELOAD=true
ENABLE_DEBUG_MODE=true
DISABLE_SECURITY_CHECKS=false  # Never disable in production